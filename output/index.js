/*!
 * event-subscribe cjs 1.0.0
 * (c) 2020 - 2021 jackness
 * Released under the MIT License.
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(){this.eventResultMap={},this.eventFnMap={},this.eventKeyMap=new Map,this.eventKeyPadding=0}return t.prototype.formatEventKey=function(t,e){return e?""+e:t+"-"+this.eventKeyPadding++},t.prototype.on=function(t,e,n,o){var i,r=this,s=r.eventFnMap,p=r.eventResultMap,v=r.eventKeyMap;s[t]?null===(i=s[t])||void 0===i||i.push(e):s[t]=[e],o&&this.off(t,o);var a=this.formatEventKey(""+t,o);return v.set(a,e),n&&t in p&&e(p[t]),a},t.prototype.onceUntil=function(t,e,n){var o=this,i=this.on(t,(function(n){e(n)||o.off(t,i)}),n,this.formatEventKey(""+t));return i},t.prototype.once=function(t,e){var n=this,o=this.on(t,(function(i){n.off(t,o),e(i)}),!1,this.formatEventKey(""+t));return o},t.prototype.off=function(t,e){var n,o=this.eventFnMap,i=this.eventKeyMap,r=o[t];if((null==r?void 0:r.length)&&(n="string"==typeof e?i.get(e):e)){var s=r.indexOf(n);-1!==s&&r.splice(s,1)}},t.prototype.trigger=function(t,e){var n,o=this.eventFnMap,i=this.eventResultMap;o[t]&&(null===(n=o[t])||void 0===n||n.forEach((function(t){t(e)}))),i[t]=e},t.prototype.replay=function(t){var e,n=this.eventFnMap,o=this.eventResultMap;if(n[t]&&t in o){var i=o[t];null===(e=n[t])||void 0===e||e.forEach((function(t){t(i)}))}},t.prototype.reset=function(){this.destroy()},t.prototype.destroy=function(){this.eventResultMap={},this.eventFnMap={},this.eventKeyMap.clear()},t}(),e=new t;exports.EventSubscribe=t,exports.eventSubscribe=e;
